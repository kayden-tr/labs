## Only generate wildcard certificate for domain managed by Cloudflare DNS

sudo apt install certbot python3-certbot-dns-cloudflare
cd
mkdir -p ~/.secrets
tee ~/.secrets/cloudflare.ini << EOF
dns_cloudflare_email = <your-cloudflare-email>
dns_cloudflare_api_key = <your-cloudflare-api-key>
EOF
chmod 600 ~/.secrets/cloudflare.ini
sudo certbot certonly   --dns-cloudflare --dns-cloudflare-credentials ~/.secrets/cloudflare.ini \
      -d "*.<your-domain>" -d <your-domain>  \
      --preferred-challenges dns   --agree-tos   --no-eff-email   --email <your-cloudflare-email>